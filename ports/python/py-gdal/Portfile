# $Id: Portfile 114431 2013-12-08 09:48:42Z and.damore@macports.org $

PortSystem          1.0
PortGroup           python 1.0

name                py-gdal
version             1.11.0
revision            1
license             MIT
maintainers         nomaintainer
description         GDAL: Geospatial Data Abstraction Library
long_description \
    This Python package and extensions are a number of tools for programming \
    and manipulating the GDAL Geospatial Data Abstraction Library.
platforms           darwin
homepage            http://www.gdal.org
master_sites        http://pypi.python.org/packages/source/G/GDAL/
distname            GDAL-${version}
checksums           md5     505a9c1d1be06a73541dbb7bb6fca969 \
                    sha1    4179975bbdc7ab5cae868f42cbca52b41dc2a9c4

#set python.prefix   ${frameworks_dir}/Python.framework/Versions/${python.branch}
python.versions     26 27 34

if {${name} ne ${subport}} {
    depends_lib-append     port:gdal \
                           port:py${python.version}-numpy
    patch {
        reinplace "s|../../apps/|${prefix}/bin/|" ${worksrcpath}/setup.cfg
    }
    
    post-destroot {
        xinstall -m 755 -d ${destroot}${prefix}/share/doc/${subport}
        xinstall -m 755 -d ${destroot}${prefix}/share/examples/${subport}
        xinstall -m 755 -d ${destroot}${prefix}/share/examples/${subport}/scripts
    
        xinstall -W ${worksrcpath} README.txt PKG-INFO \
            ${destroot}${prefix}/share/doc/${subport}
    
        xinstall -m 644 ${worksrcpath}/samples/README \
            ${destroot}${prefix}/share/examples/${subport}/
        eval xinstall -m 755 [glob ${worksrcpath}/samples/*.py] \
            ${destroot}${prefix}/share/examples/${subport}/
        eval xinstall -m 755 [glob ${worksrcpath}/scripts/*.py] \
            ${destroot}${prefix}/share/examples/${subport}/scripts
        eval xinstall -m 644 [glob ${worksrcpath}/scripts/*.dox] \
            ${destroot}${prefix}/share/examples/${subport}/scripts
    }
}
